name: portfolio

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  pull_request:
    paths:
      - ".github/workflows/main.yaml"
      - "src/**"
      - "index.html"
      - "eslint.config.js"
      - "prettier.config.js"
      - "package.json"
  push:
    branches:
      - main
    paths:
      - ".github/workflows/main.yaml"
      - "src/**"
      - "index.html"
      - "eslint.config.js"
      - "prettier.config.js"
      - "package.json"

jobs:
  semantic_pull_request:
    name: âœ… Semantic Pull Request
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - uses: amannn/action-semantic-pull-request@v5
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  build:
    name: ğŸš§ Build
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“š Git Checkout
        uses: actions/checkout@v2

      - name: ğŸš€ Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: "20.x"

      - name: ğŸ‘€ Install Yarn
        run: npm install -g yarn

      - name: ğŸ“¦ Install Dependencies
        run: yarn install

      - name: ğŸ¯ Check ESlint
        run: yarn lint

      - name: âœ¨ Check Formatting
        run: yarn format

      - name: âš’ï¸ Build
        run: yarn build
